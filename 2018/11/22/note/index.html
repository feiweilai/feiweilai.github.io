<!DOCTYPE html><html><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Js Note"><meta name="keywords" content=""><meta name="author" content="John Doe,undefined"><meta name="copyright" content="John Doe"><title>Js Note | Hexo</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.3"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  localSearch: undefined
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#属性操作："><span class="toc-number">1.</span> <span class="toc-text">属性操作：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#属性标签："><span class="toc-number">2.</span> <span class="toc-text">属性标签：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#对象标签，对象序列化："><span class="toc-number">3.</span> <span class="toc-text">对象标签，对象序列化：</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">John Doe</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">5</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container" style="background-image: url(true)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Hexo</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">Js Note</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-11-22</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div id="post-content"><p>###第一章 数据类型<br>“32”+32=3232  “32”-32=0<br>原始类型:number，string，boolean，null，undefined<br>对象Object: Function,Array,Data…<br>“1.23” == 1.23<br>null == undefined<br>new Object() == new Object()<br>[1, 2] == [1, 2]</p>
<p>####严格等于 a===b</p>
<p>#####类型不同，返回false</p>
<p>#####类型相同<br>    NaN ≠ NaN<br>    new Object ≠ new Object<br>    null === null<br>    undefined === undefined</p>
<p>#####a==b</p>
<p>#####类型相同，同===</p>
<p>#####类型不同，尝试类型转换和比较:<br>    null == undefined 相等<br>    number == string 转number     1 == “1.0” // true<br>    boolean == ?  转number       1 == true  // true<br>    object == number | string 尝试对象转为基本类型  new String(‘hi’) == ‘hi’ // true<br>    其它：false</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = “string”;</span><br><span class="line">alert(a.length); <span class="comment">//6 基本类型转化为对应的包装对象</span></span><br><span class="line">a.t = <span class="number">3</span>;</span><br><span class="line">alert(a.t) <span class="comment">//undefined; 临时对象已经销毁</span></span><br></pre></td></tr></table></figure>
<p>####类型检测<br>    typeof，instanceof，Object.prototype.toString，constructor，duck type<br>      typeof 100 === “number”<br>      typeof true === “boolean”<br>      typeof function () {} === “function”<br>      typeof(undefined) === “undefined”<br>      typeof(new Object() ) === “object”<br>      typeof( [1， 2] ) === “object”<br>      typeof(NaN ) === “number”<br>      typeof(null) === “object”</p>
<p><em>obj</em> instanceof <em>Object</em><br>判断左操作数的原型链上是否有右边对象的prototype属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString.apply([]); === “[object <span class="built_in">Array</span>]”;</span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.apply(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;); === “[object <span class="built_in">Function</span>]”;</span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.apply(<span class="literal">null</span>); === “[object Null]”</span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.apply(<span class="literal">undefined</span>); === “[object Undefined]”</span><br><span class="line">IE6/<span class="number">7</span>/<span class="number">8</span> <span class="built_in">Object</span>.prototype.toString.apply(<span class="literal">null</span>) 返回”[object <span class="built_in">Object</span>]”</span><br></pre></td></tr></table></figure>
<p>typeof<br>适合基本类型及function检测，遇到null失效。</p>
<p>[Class]<br>通过{}.toString拿到，适合内置对象和基元类型，遇到null和undefined失效(IE678等返回[object Object])。</p>
<p>instanceof<br>适合自定义对象，也可以用来检测原生对象，在不同iframe和window间检测时失效。</p>
<p>###第二章 运算符<br><code>var val = (1, 2, 3); // val = 3 逗号运算符不常见</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">x</span> : <span class="number">1</span>&#125;;</span><br><span class="line">obj.x;                      <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">delete</span> obj.x;               <span class="comment">// delete运算符</span></span><br><span class="line">obj.x;                      <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">'x'</span>, &#123;</span><br><span class="line">	configurable : <span class="literal">false</span>, </span><br><span class="line">	value : <span class="number">1</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">delete</span> obj.x; <span class="comment">// false</span></span><br><span class="line">obj.x;            <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.x = <span class="number">1</span>;</span><br><span class="line">‘x’ <span class="keyword">in</span> <span class="built_in">window</span>; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">&#123;&#125; <span class="keyword">instanceof</span> <span class="built_in">Object</span>                <span class="comment">// true</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="number">100</span> === ‘number’ <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">Foo.prototype.x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> Foo();</span><br><span class="line">obj.x;  <span class="comment">// 1</span></span><br><span class="line">obj.hasOwnProperty(<span class="string">'x'</span>); <span class="comment">// false</span></span><br><span class="line">obj.__proto__.hasOwnProperty(<span class="string">'x'</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>;  <span class="comment">// window (浏览器)</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    func : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>;&#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.func(); <span class="comment">// obj</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="number">0</span>  <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">void</span>(<span class="number">0</span>) <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></p>
<p>###第三章 语句<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = b = <span class="number">1</span>;  <span class="comment">//a是函数内变量，b是全局变量</span></span><br><span class="line">&#125;</span><br><span class="line">foo();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> a);  <span class="comment">// ‘undefined’</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> b);  <span class="comment">// ‘number</span></span><br></pre></td></tr></table></figure></p>
<p>应用var a = 1, b = 1;<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">fd(); <span class="comment">// true 函数声明</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fd</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// do sth.</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fe(); <span class="comment">// TypeError 函数表达式</span></span><br><span class="line"><span class="keyword">var</span> fe = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// do sth.</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">x</span> : <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>&#125;</span><br><span class="line"><span class="keyword">for</span> (p <span class="keyword">in</span> obj) &#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1.</span> 顺序不确定</span><br><span class="line"><span class="number">2.</span> enumerable为<span class="literal">false</span>时不会出现</span><br><span class="line"><span class="number">3.</span> <span class="keyword">for</span> <span class="keyword">in</span>对象属性时受原型链影响</span><br><span class="line"></span><br><span class="line"><span class="meta">'use strict'</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>###第四章 对象<br>对象中包含一系列属性，这些属性是<strong>无序</strong>的。<br>每个属性都有一个<strong>字符串</strong>key和对应的value。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">obj[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">obj[<span class="string">'1'</span>] = <span class="number">2</span>;</span><br><span class="line">obj; <span class="comment">// Object &#123;1: 2&#125;</span></span><br><span class="line"></span><br><span class="line">obj[&#123;&#125;] = <span class="literal">true</span>;</span><br><span class="line">obj[&#123;<span class="attr">x</span> : <span class="number">1</span>&#125;] = <span class="literal">true</span>;</span><br><span class="line">obj; <span class="comment">// Object &#123;1: 2, [object Object]: true&#125;</span></span><br></pre></td></tr></table></figure></p>
<p><img src="D:/learning/课件/javascript/class.png" alt="class"></p>
<p>对象创建-字面量<br>new/原型链</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">foo.prototype.z = <span class="number">3</span>; <span class="comment">//foo默认带prototype这个对象属性</span></span><br><span class="line"><span class="keyword">var</span> obj =<span class="keyword">new</span> foo(); <span class="comment">//对象原型指向构造器的prototype属性foo.prototype</span></span><br><span class="line">obj.y = <span class="number">2</span>;</span><br><span class="line">obj.x = <span class="number">1</span>;</span><br><span class="line"><span class="comment">//foo.prototype的原型指向Object.prototype Object.prototype的原型指向null</span></span><br><span class="line">obj.x; <span class="comment">// 1</span></span><br><span class="line">obj.y; <span class="comment">// 2</span></span><br><span class="line">obj.z; <span class="comment">// 3</span></span><br><span class="line"><span class="keyword">typeof</span> obj.toString; <span class="comment">// ‘function'</span></span><br><span class="line"><span class="string">'z'</span> <span class="keyword">in</span> obj; <span class="comment">// true</span></span><br><span class="line">obj.hasOwnProperty(<span class="string">'z'</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">obj.z = <span class="number">5</span>;</span><br><span class="line">obj.hasOwnProperty(<span class="string">'z'</span>); <span class="comment">// true</span></span><br><span class="line">foo.prototype.z; <span class="comment">// still 3</span></span><br><span class="line">obj.z; <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line">obj.z = <span class="literal">undefined</span>;</span><br><span class="line">obj.z; <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> obj.z; <span class="comment">// true</span></span><br><span class="line">obj.z; <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> obj.z; <span class="comment">// true</span></span><br><span class="line">obj.z; <span class="comment">// still 3!!!</span></span><br></pre></td></tr></table></figure>
<p>对象创建-Object.create<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(&#123;<span class="attr">x</span> : <span class="number">1</span>&#125;);</span><br><span class="line">obj.x <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">typeof</span> obj.toString <span class="comment">// "function"</span></span><br><span class="line">obj.hasOwnProperty(<span class="string">'x'</span>);<span class="comment">// false</span></span><br><span class="line"><span class="comment">//obj-&gt;&#123;x : 1&#125;-&gt;Object.prototype-&gt;null</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line">obj.toString <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></p>
<h4 id="属性操作："><a href="#属性操作：" class="headerlink" title="属性操作："></a>属性操作：</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">x1</span> : <span class="number">1</span>, <span class="attr">x2</span> : <span class="number">2</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> i = <span class="number">1</span>, n = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (; i &lt;= n; i++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(obj[<span class="string">'x'</span> + i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 输出: 1, 2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p;</span><br><span class="line"><span class="keyword">for</span> (p <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(obj[p]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123;<span class="attr">age</span> : <span class="number">28</span>, <span class="attr">title</span> : <span class="string">'fe'</span>&#125;;</span><br><span class="line"><span class="keyword">delete</span> person.age; <span class="comment">// true</span></span><br><span class="line"><span class="keyword">delete</span> person[<span class="string">'title'</span>]; <span class="comment">// true</span></span><br><span class="line">person.age; <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">delete</span> person.age; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> <span class="built_in">Object</span>.prototype; <span class="comment">// false,</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> descriptor = <span class="built_in">Object</span>.getOwnPropertyDescriptor(<span class="built_in">Object</span>, <span class="string">'prototype'</span>);</span><br><span class="line">descriptor.configurable; <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> globalVal = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">delete</span> globalVal; <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> localVal = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">delete</span> localVal;</span><br><span class="line">&#125;()); <span class="comment">// false ？？？</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fd</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="keyword">delete</span> fd; <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fd</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">delete</span> fd;</span><br><span class="line">&#125;()); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">ohNo = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">window</span>.ohNo; <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">delete</span> ohNo; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cat = <span class="keyword">new</span> <span class="built_in">Object</span>;</span><br><span class="line">cat.legs = <span class="number">4</span>;</span><br><span class="line">cat.name = <span class="string">"Kitty"</span>;</span><br><span class="line"></span><br><span class="line"><span class="string">'legs'</span> <span class="keyword">in</span> cat; <span class="comment">// true</span></span><br><span class="line"><span class="string">'abc'</span> <span class="keyword">in</span> cat; <span class="comment">// false</span></span><br><span class="line"><span class="string">"toString"</span> <span class="keyword">in</span> cat; <span class="comment">// true, inherited property!!!</span></span><br><span class="line"></span><br><span class="line">cat.hasOwnProperty(<span class="string">'legs'</span>); <span class="comment">// true</span></span><br><span class="line">cat.hasOwnProperty(<span class="string">'toString'</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">cat.propertyIsEnumerable(<span class="string">'legs'</span>); <span class="comment">// true</span></span><br><span class="line">cat.propertyIsEnumerable(<span class="string">'toString'</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(cat, <span class="string">'price'</span>, &#123;<span class="attr">enumerable</span> : <span class="literal">false</span>, <span class="attr">value</span> : <span class="number">1000</span>&#125;);</span><br><span class="line">cat.propertyIsEnumerable(<span class="string">'price'</span>); <span class="comment">// false</span></span><br><span class="line">cat.hasOwnProperty(<span class="string">'price'</span>); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (cat.legs != <span class="literal">undefined</span>) &#123;</span><br><span class="line">    <span class="comment">// !== undefined, or, !== null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> o = &#123;<span class="attr">x</span> : <span class="number">1</span>, <span class="attr">y</span> : <span class="number">2</span>, <span class="attr">z</span> : <span class="number">3</span>&#125;;</span><br><span class="line"><span class="string">'toString'</span> <span class="keyword">in</span> o; <span class="comment">// true</span></span><br><span class="line">o.propertyIsEnumerable(<span class="string">'toString'</span>); <span class="comment">// false</span></span><br><span class="line"><span class="keyword">var</span> key;</span><br><span class="line"><span class="keyword">for</span> (key <span class="keyword">in</span> o) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key); <span class="comment">// x, y, z</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(o);</span><br><span class="line">obj.a = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">var</span> key;</span><br><span class="line"><span class="keyword">for</span> (key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key); <span class="comment">// a, x, y, z</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = <span class="built_in">Object</span>.create(o);</span><br><span class="line">obj.a = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">var</span> key;</span><br><span class="line"><span class="keyword">for</span> (key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.hasOwnProperty(key)) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(key); <span class="comment">// a</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>getter/setter 方法<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> man = &#123;</span><br><span class="line">    weibo : <span class="string">'@Bosn'</span>,</span><br><span class="line">    $age : <span class="literal">null</span>,</span><br><span class="line">    get age() &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.$age == <span class="literal">undefined</span>) &#123;  <span class="comment">//null或者undefined</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear() - <span class="number">1988</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.$age;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    set age(val) &#123;</span><br><span class="line">        val = +val; <span class="comment">//为了转化为数字</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(val) &amp;&amp; val &gt; <span class="number">0</span> &amp;&amp; val &lt; <span class="number">150</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.$age = +val;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Incorrect val = '</span> + val);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(man.age); <span class="comment">// 27</span></span><br><span class="line">man.age = <span class="number">100</span>;</span><br><span class="line"><span class="built_in">console</span>.log(man.age); <span class="comment">// 100;</span></span><br><span class="line">man.age = <span class="string">'abc'</span>; <span class="comment">// error:Incorrect val = NaN</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(foo.prototype, <span class="string">'z'</span>, </span><br><span class="line">    &#123;<span class="attr">get</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="number">1</span>;&#125;&#125;);</span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> foo();</span><br><span class="line">obj.z; <span class="comment">// 1</span></span><br><span class="line">obj.z = <span class="number">10</span>;</span><br><span class="line">obj.z; <span class="comment">// still 1 当查到原型链上的属性有get或者set方法时，赋值走set方法，不在当前对象上创建</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">'z'</span>, </span><br><span class="line">&#123;<span class="attr">value</span> : <span class="number">100</span>, <span class="attr">configurable</span>: <span class="literal">true</span>&#125;);</span><br><span class="line">obj.z; <span class="comment">// 100;</span></span><br><span class="line"><span class="keyword">delete</span> obj.z;</span><br><span class="line">obj.z; <span class="comment">// back to 1</span></span><br></pre></td></tr></table></figure></p>
<h4 id="属性标签："><a href="#属性标签：" class="headerlink" title="属性标签："></a>属性标签：</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(&#123;<span class="attr">pro</span> : <span class="literal">true</span>&#125;, <span class="string">'pro'</span>);</span><br><span class="line"><span class="comment">// Object &#123;value: true, writable: true, enumerable: true, configurable: true&#125;</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(&#123;<span class="attr">pro</span> : <span class="literal">true</span>&#125;, <span class="string">'a'</span>); <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> person = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(person, <span class="string">'name'</span>, &#123;</span><br><span class="line">    configurable : <span class="literal">false</span>,</span><br><span class="line">    writable : <span class="literal">false</span>,</span><br><span class="line">    enumerable : <span class="literal">true</span>,</span><br><span class="line">    value : <span class="string">"Bosn Ma"</span></span><br><span class="line">&#125;);</span><br><span class="line">person.name; <span class="comment">// Bosn Ma</span></span><br><span class="line">person.name = <span class="number">1</span>;</span><br><span class="line">person.name; <span class="comment">// still Bosn Ma</span></span><br><span class="line"><span class="keyword">delete</span> person.name; <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(person, <span class="string">'type'</span>, &#123;</span><br><span class="line">    configurable : <span class="literal">true</span>,</span><br><span class="line">    writable : <span class="literal">true</span>,</span><br><span class="line">    enumerable : <span class="literal">false</span>,</span><br><span class="line">    value : <span class="string">"Object"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.keys(person); <span class="comment">// ["name"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//定义多个属性</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperties(person, &#123;</span><br><span class="line">    title : &#123;<span class="attr">value</span> : <span class="string">'fe'</span>, <span class="attr">enumerable</span> : <span class="literal">true</span>&#125;,</span><br><span class="line">    corp : &#123;<span class="attr">value</span> : <span class="string">'BABA'</span>, <span class="attr">enumerable</span> : <span class="literal">true</span>&#125;,</span><br><span class="line">    salary : &#123;<span class="attr">value</span> : <span class="number">50000</span>, <span class="attr">enumerable</span> : <span class="literal">true</span>, <span class="attr">writable</span> : <span class="literal">true</span>&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperties(person, &#123;</span><br><span class="line">    title : &#123;<span class="attr">value</span> : <span class="string">'fe'</span>, <span class="attr">enumerable</span> : <span class="literal">true</span>&#125;,</span><br><span class="line">    corp : &#123;<span class="attr">value</span> : <span class="string">'BABA'</span>, <span class="attr">enumerable</span> : <span class="literal">true</span>&#125;,</span><br><span class="line">    salary : &#123;<span class="attr">value</span> : <span class="number">50000</span>, <span class="attr">enumerable</span> : <span class="literal">true</span>, <span class="attr">writable</span> : <span class="literal">true</span>&#125;,</span><br><span class="line">    luck : &#123;</span><br><span class="line">        get : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.random() &gt; <span class="number">0.5</span> ? <span class="string">'good'</span> : <span class="string">'bad'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    promote : &#123;</span><br><span class="line">        set : <span class="function"><span class="keyword">function</span> (<span class="params">level</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.salary *= <span class="number">1</span> + level * <span class="number">0.1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(person, <span class="string">'salary'</span>);</span><br><span class="line"><span class="comment">// Object &#123;value: 50000, writable: true, enumerable: true, configurable: false&#125;</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(person, <span class="string">'corp'</span>);</span><br><span class="line"><span class="comment">// Object &#123;value: "BABA", writable: false, enumerable: true, configurable: false&#125;</span></span><br><span class="line">person.salary; <span class="comment">// 50000</span></span><br><span class="line">person.promote = <span class="number">2</span>;</span><br><span class="line">person.salary; <span class="comment">// 60000</span></span><br></pre></td></tr></table></figure>
<h4 id="对象标签，对象序列化："><a href="#对象标签，对象序列化：" class="headerlink" title="对象标签，对象序列化："></a>对象标签，对象序列化：</h4><p>[[proto]]<br>[[class]]<br>[[extensible]]</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> toString = <span class="built_in">Object</span>.prototype.toString;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params">o</span>)</span>&#123;<span class="keyword">return</span> toString.call(o).slice(<span class="number">8</span>,<span class="number">-1</span>);&#125;;</span><br><span class="line"></span><br><span class="line">toString.call(<span class="literal">null</span>); <span class="comment">// "[object Null]"</span></span><br><span class="line">getType(<span class="literal">null</span>); <span class="comment">// "Null"</span></span><br><span class="line">getType(<span class="literal">undefined</span>); <span class="comment">// "Undefined"</span></span><br><span class="line">getType(<span class="number">1</span>); <span class="comment">// "Number"</span></span><br><span class="line">getType(<span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">1</span>)); <span class="comment">// "Number"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">1</span>); <span class="comment">// "object"</span></span><br><span class="line">getType(<span class="literal">true</span>); <span class="comment">// "Boolean"</span></span><br><span class="line">getType(<span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">true</span>)); <span class="comment">// "Boolean"</span></span><br></pre></td></tr></table></figure>
<p>[[extensible]]<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">x</span> : <span class="number">1</span>, <span class="attr">y</span> : <span class="number">2</span>&#125;;</span><br><span class="line"><span class="built_in">Object</span>.isExtensible(obj); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.preventExtensions(obj);</span><br><span class="line"><span class="built_in">Object</span>.isExtensible(obj); <span class="comment">// false</span></span><br><span class="line">obj.z = <span class="number">1</span>;</span><br><span class="line">obj.z; <span class="comment">// undefined, add new property failed</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, <span class="string">'x'</span>);</span><br><span class="line"><span class="comment">// Object &#123;value: 1, writable: true, enumerable: true, configurable: true&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.seal(obj);  <span class="comment">//会把对象configurable: false</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, <span class="string">'x'</span>);</span><br><span class="line"><span class="comment">// Object &#123;value: 1, writable: true, enumerable: true, configurable: false&#125;</span></span><br><span class="line"><span class="built_in">Object</span>.isSealed(obj); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.freeze(obj); <span class="comment">//不可写不可改</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, <span class="string">'x'</span>);</span><br><span class="line"><span class="comment">// Object &#123;value: 1, writable: false, enumerable: true, configurable: false&#125;</span></span><br><span class="line"><span class="built_in">Object</span>.isFrozen(obj); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// [caution] not affects prototype chain!!!</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">x</span> : <span class="number">1</span>, <span class="attr">y</span> : <span class="literal">true</span>, <span class="attr">z</span> : [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="attr">nullVal</span> : <span class="literal">null</span>&#125;;</span><br><span class="line"><span class="built_in">JSON</span>.stringify(obj); <span class="comment">// "&#123;"x":1,"y":true,"z":[1,2,3],"nullVal":null&#125;"</span></span><br><span class="line"></span><br><span class="line">obj = &#123;<span class="attr">val</span> : <span class="literal">undefined</span>, <span class="attr">a</span> : <span class="literal">NaN</span>, <span class="attr">b</span> : <span class="literal">Infinity</span>, <span class="attr">c</span> : <span class="keyword">new</span> <span class="built_in">Date</span>()&#125;;</span><br><span class="line"><span class="built_in">JSON</span>.stringify(obj); <span class="comment">// "&#123;"a":null,"b":null,"c":"2015-01-20T14:15:43.910Z"&#125;"</span></span><br><span class="line"></span><br><span class="line">obj = <span class="built_in">JSON</span>.parse(<span class="string">'&#123;"x" : 1&#125;'</span>);</span><br><span class="line">obj.x; <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
<p>序列化自定义<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    x : <span class="number">1</span>,</span><br><span class="line">    y : <span class="number">2</span>,</span><br><span class="line">    o : &#123;</span><br><span class="line">        o1 : <span class="number">1</span>,</span><br><span class="line">        o2 : <span class="number">2</span>,</span><br><span class="line">        toJSON : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.o1 + <span class="keyword">this</span>.o2;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">JSON</span>.stringify(obj); <span class="comment">// "&#123;"x":1,"y":2,"o":3&#125;"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">x</span> : <span class="number">1</span>, <span class="attr">y</span> : <span class="number">2</span>&#125;;</span><br><span class="line">obj.toString(); <span class="comment">// "[object Object]"</span></span><br><span class="line">obj.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>.x + <span class="keyword">this</span>.y&#125;;</span><br><span class="line"><span class="string">"Result "</span> + obj; <span class="comment">// "Result 3", by toString</span></span><br><span class="line"></span><br><span class="line">+obj; <span class="comment">// 3, from toString</span></span><br><span class="line"></span><br><span class="line">obj.valueOf = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>.x + <span class="keyword">this</span>.y + <span class="number">100</span>;&#125;;</span><br><span class="line"><span class="comment">//valueOf和toString都存在且能转化为基本类型，先valueOf</span></span><br><span class="line">+obj; <span class="comment">// 103, from valueOf </span></span><br><span class="line"></span><br><span class="line"><span class="string">"Result "</span> + obj; <span class="comment">// still "Result 103"</span></span><br></pre></td></tr></table></figure></p>
<p>###第五章 数组</p>
<p>创建数组-字面量<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//size from 0 to 2^23-1</span></span><br><span class="line"><span class="keyword">var</span> BAT = [<span class="string">'Alibaba'</span>, <span class="string">'Tencent'</span>, <span class="string">'Baidu'</span>];</span><br><span class="line"><span class="keyword">var</span> students = [&#123;<span class="attr">name</span> : <span class="string">'Bosn'</span>, <span class="attr">age</span> : <span class="number">27</span>&#125;, &#123;<span class="attr">name</span> : <span class="string">'Nunnly'</span>, <span class="attr">age</span> : <span class="number">3</span>&#125;];</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">'Nunnly'</span>, <span class="string">'is'</span>, <span class="string">'big'</span>, <span class="string">'keng'</span>, <span class="string">'B'</span>, <span class="number">123</span>, <span class="literal">true</span>, <span class="literal">null</span>];</span><br><span class="line"><span class="keyword">var</span> arrInArr = [[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]];</span><br><span class="line"><span class="keyword">var</span> commasArr1 = [<span class="number">1</span>, , <span class="number">2</span>]; <span class="comment">// 1, undefined, 2</span></span><br><span class="line"><span class="keyword">var</span> commasArr2 = [,,]; <span class="comment">// undefined * 2!!!数组最后允许有一个逗号</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(); </span><br><span class="line"><span class="keyword">var</span> arrWithLength = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">100</span>); <span class="comment">// undefined * 100</span></span><br><span class="line"><span class="keyword">var</span> arrLikesLiteral = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">null</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="string">"hi"</span>);</span><br><span class="line"><span class="comment">// 等价于[true, false, null, 1, 2, "hi"];</span></span><br><span class="line"></span><br><span class="line">数组元素增删</span><br><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line">arr[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">arr[<span class="number">1</span>] = <span class="number">2</span>;</span><br><span class="line">arr.push(<span class="number">3</span>);</span><br><span class="line">arr; <span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line">arr[arr.length] = <span class="number">4</span>; <span class="comment">// equal to arr.push(4);</span></span><br><span class="line">arr; <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line">arr.unshift(<span class="number">0</span>);</span><br><span class="line">arr; <span class="comment">// [0, 1, 2, 3, 4];</span></span><br><span class="line"><span class="keyword">delete</span> arr[<span class="number">2</span>];</span><br><span class="line">arr; <span class="comment">// [0, 1, undefined, 3, 4]</span></span><br><span class="line">arr.length; <span class="comment">// 5</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">in</span> arr; <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">arr.length -= <span class="number">1</span>;</span><br><span class="line">arr; <span class="comment">// [0, 1, undefined, 3],  4 is removed</span></span><br><span class="line"></span><br><span class="line">arr.pop(); <span class="comment">// 3 returned by pop</span></span><br><span class="line">arr; <span class="comment">// [0, 1, undefined], 3 is removed</span></span><br><span class="line"></span><br><span class="line">arr.shift(); <span class="comment">// 0 returned by shift</span></span><br><span class="line">arr; <span class="comment">// [1, undefined]</span></span><br></pre></td></tr></table></figure></p>
<p>数组迭代<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">0</span>, n = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">for</span> (; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arr[i]); <span class="comment">// 1, 2, 3, 4, 5</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> arr) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arr[i]); <span class="comment">// 1, 2, 3, 4, 5 </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Array</span>.prototype.x = <span class="string">'inherited'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> arr) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(arr[i]); <span class="comment">// 1, 2, 3, 4, 5, inherited</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> arr) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr.hasOwnProperty(i)) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(arr[i]); <span class="comment">// 1, 2, 3, 4, 5</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>稀疏数组并不含有从0开始的连续索引。一般length属性值比实际元素个数大<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = [<span class="literal">undefined</span>];</span><br><span class="line"><span class="keyword">var</span> arr2 = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>);</span><br><span class="line"><span class="number">0</span> <span class="keyword">in</span> arr1; <span class="comment">// true</span></span><br><span class="line"><span class="number">0</span> <span class="keyword">in</span> arr2; <span class="comment">// false</span></span><br><span class="line">arr1.length = <span class="number">100</span>;</span><br><span class="line">arr1[<span class="number">99</span>] = <span class="number">123</span>;</span><br><span class="line"><span class="number">99</span> <span class="keyword">in</span> arr1; <span class="comment">// true</span></span><br><span class="line"><span class="number">98</span> <span class="keyword">in</span> arr1; <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [,,];</span><br><span class="line"><span class="number">0</span> <span class="keyword">in</span> arr; <span class="comment">// false</span></span><br></pre></td></tr></table></figure></p>
<p>数组方法<br>Array.prototype.join<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr.join(); <span class="comment">// "1,2,3"</span></span><br><span class="line">arr.join(<span class="string">"_"</span>); <span class="comment">// "1_2_3"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">repeatString</span>(<span class="params">str, n</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Array</span>(n + <span class="number">1</span>).join(str);</span><br><span class="line">&#125;</span><br><span class="line">repeatString(<span class="string">"a"</span>, <span class="number">3</span>); <span class="comment">// "aaa"</span></span><br><span class="line">repeatString(<span class="string">"Hi"</span>, <span class="number">5</span>); <span class="comment">// "HiHiHiHiHi"</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr.reverse(); <span class="comment">// [3, 2, 1]</span></span><br><span class="line">arr; <span class="comment">// [3, 2, 1]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">"a"</span>, <span class="string">"d"</span>, <span class="string">"c"</span>, <span class="string">"b"</span>];</span><br><span class="line">arr.sort(); <span class="comment">// ["a", "b", "c", "d"]</span></span><br><span class="line"></span><br><span class="line">arr = [<span class="number">13</span>, <span class="number">24</span>, <span class="number">51</span>, <span class="number">3</span>];</span><br><span class="line">arr.sort(); <span class="comment">// [13, 24, 3, 51]</span></span><br><span class="line">arr; <span class="comment">// [13, 24, 3, 51]</span></span><br><span class="line"></span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;); <span class="comment">// [3, 13, 24, 51]</span></span><br><span class="line">arr = [&#123;<span class="attr">age</span> : <span class="number">25</span>&#125;, &#123;<span class="attr">age</span> : <span class="number">39</span>&#125;, &#123;<span class="attr">age</span> : <span class="number">99</span>&#125;];</span><br><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> a.age - b.age;</span><br><span class="line">&#125;);</span><br><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">'age'</span>, item.age);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// result:</span></span><br><span class="line"><span class="comment">// age 25</span></span><br><span class="line"><span class="comment">// age 39</span></span><br><span class="line"><span class="comment">// age 99</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr.concat(<span class="number">4</span>, <span class="number">5</span>); <span class="comment">// [1, 2, 3, 4, 5]</span></span><br><span class="line">arr; <span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line">arr.concat([<span class="number">10</span>, <span class="number">11</span>], <span class="number">13</span>); <span class="comment">// [1, 2, 3, 10, 11, 13]</span></span><br><span class="line"></span><br><span class="line">arr.concat([<span class="number">1</span>, [<span class="number">2</span>, <span class="number">3</span>]]); <span class="comment">// [1, 2, 3, 1, [2, 3]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//原数组没修改</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr.slice(<span class="number">1</span>, <span class="number">3</span>); <span class="comment">// [2, 3]</span></span><br><span class="line">arr.slice(<span class="number">1</span>); <span class="comment">// [2, 3, 4, 5]</span></span><br><span class="line">arr.slice(<span class="number">1</span>, <span class="number">-1</span>); <span class="comment">// [2, 3, 4]</span></span><br><span class="line">arr.slice(<span class="number">-4</span>, <span class="number">-3</span>); <span class="comment">// [2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//原数组修改了</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr.splice(<span class="number">2</span>); <span class="comment">// returns [3, 4, 5]</span></span><br><span class="line">arr; <span class="comment">// [1, 2];</span></span><br><span class="line"></span><br><span class="line">arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr.splice(<span class="number">2</span>, <span class="number">2</span>); <span class="comment">// returns [3, 4]</span></span><br><span class="line">arr; <span class="comment">// [1, 2, 5];</span></span><br><span class="line"></span><br><span class="line">arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr.splice(<span class="number">1</span>, <span class="number">1</span>, <span class="string">'a'</span>, <span class="string">'b'</span>); <span class="comment">// returns [2]</span></span><br><span class="line">arr; <span class="comment">// [1, "a", "b", 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">x, index, a</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x + <span class="string">'|'</span> + index + <span class="string">'|'</span> + (a === arr));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 1|0|true</span></span><br><span class="line"><span class="comment">// 2|1|true</span></span><br><span class="line"><span class="comment">// 3|2|true</span></span><br><span class="line"><span class="comment">// 4|3|true</span></span><br><span class="line"><span class="comment">// 5|4|true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr.map(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> x + <span class="number">10</span>;</span><br><span class="line">&#125;); <span class="comment">// [11, 12, 13]</span></span><br><span class="line">arr; <span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>];</span><br><span class="line">arr.filter(<span class="function"><span class="keyword">function</span>(<span class="params">x, index</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> index % <span class="number">3</span> === <span class="number">0</span> || x &gt;= <span class="number">8</span>;</span><br><span class="line">&#125;); <span class="comment">// returns [1, 4, 7, 8, 9, 10]</span></span><br><span class="line">arr; <span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr.every(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> x &lt; <span class="number">10</span>;</span><br><span class="line">&#125;); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">arr.every(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> x &lt; <span class="number">3</span>;</span><br><span class="line">&#125;); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">arr.some(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> x === <span class="number">3</span>;</span><br><span class="line">&#125;); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">arr.some(<span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> x === <span class="number">100</span>;</span><br><span class="line">&#125;); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> sum = arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> x + y</span><br><span class="line">&#125;, <span class="number">0</span>); <span class="comment">// 6 第二个参数0表示第一个数是0，可以不传</span></span><br><span class="line">arr; <span class="comment">//[1, 2, 3]</span></span><br><span class="line"></span><br><span class="line">arr = [<span class="number">3</span>, <span class="number">9</span>, <span class="number">6</span>];</span><br><span class="line"><span class="keyword">var</span> max = arr.reduce(<span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(x + <span class="string">"|"</span> + y);</span><br><span class="line">     <span class="keyword">return</span> x &gt; y ? x : y;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 3|9</span></span><br><span class="line"><span class="comment">// 9|6</span></span><br><span class="line">max; <span class="comment">// 9</span></span><br><span class="line"></span><br><span class="line">max = arr.reduceRight(<span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(x + <span class="string">"|"</span> + y);</span><br><span class="line">     <span class="keyword">return</span> x &gt; y ? x : y;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 6|9</span></span><br><span class="line"><span class="comment">// 9|3</span></span><br><span class="line">max; <span class="comment">// 9</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line">arr.indexOf(<span class="number">2</span>); <span class="comment">// 1</span></span><br><span class="line">arr.indexOf(<span class="number">99</span>); <span class="comment">// -1</span></span><br><span class="line">arr.indexOf(<span class="number">1</span>, <span class="number">1</span>); <span class="comment">// 4 第二个参数表示从第几个元素开始</span></span><br><span class="line">arr.indexOf(<span class="number">1</span>, <span class="number">-3</span>); <span class="comment">// 4</span></span><br><span class="line">arr.indexOf(<span class="number">2</span>, <span class="number">-1</span>); <span class="comment">// -1</span></span><br><span class="line">arr.lastIndexOf(<span class="number">2</span>); <span class="comment">// 3 从右往左找</span></span><br><span class="line">arr.lastIndexOf(<span class="number">2</span>, <span class="number">-2</span>); <span class="comment">// 3</span></span><br><span class="line">arr.lastIndexOf(<span class="number">2</span>, <span class="number">-3</span>); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.isArray([]); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">[] <span class="keyword">instanceof</span> <span class="built_in">Array</span>; <span class="comment">// true</span></span><br><span class="line">(&#123;&#125;).toString.apply([]) === <span class="string">'[object Array]'</span>; <span class="comment">// true</span></span><br><span class="line">[].constructor === <span class="built_in">Array</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>数组VS对象<br>相同：都可以继承，数组是对象，对象不一定是数组<br>都可以当做对象添加删除属性<br>不同：数组自动更新length<br>按索引访问数组常常比访问一般对象属性明显迅速。<br>数组对象继承Array.prototype上的大量数组操作方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"hello world"</span>;   <span class="comment">//字符串是类数组</span></span><br><span class="line">str.charAt(<span class="number">0</span>); <span class="comment">// "h"</span></span><br><span class="line">str[<span class="number">1</span>]; <span class="comment">// e</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.prototype.join.call(str, <span class="string">"_"</span>);</span><br><span class="line"><span class="comment">// "h_e_l_l_o_ _w_o_r_l_d"</span></span><br></pre></td></tr></table></figure>
<p>###第六章 函数和作用域</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> add=<span class="function"><span class="keyword">function</span>(<span class="params">a,  b</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//  do  sth</span></span><br><span class="line">&#125;;  </span><br><span class="line"><span class="comment">//  IEF(Immediately  Executed  Function)</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="comment">//  do  sth</span></span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">//  first-class  function</span></span><br><span class="line"><span class="keyword">return</span>  <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="comment">//  do  sth</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  NFE(Named  Function  Expression) 调试的时候在调用栈可以看到</span></span><br><span class="line"><span class="keyword">var</span>  add= <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a,  b</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//  do  sth</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Function构造器</span></span><br><span class="line"><span class="keyword">var</span> func= <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'console.log(a+b);'</span>); <span class="comment">//new可以省略</span></span><br><span class="line">func(<span class="number">1</span>,<span class="number">2</span>);   <span class="comment">//  3</span></span><br><span class="line"><span class="comment">//  CASE  1</span></span><br><span class="line"><span class="built_in">Function</span>(<span class="string">'var  localVal="local";  console.log(localVal);'</span>)();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span>  localVal);</span><br><span class="line"><span class="comment">//  result:  local,  undefined</span></span><br><span class="line"><span class="comment">//  CASE  2</span></span><br><span class="line"><span class="keyword">var</span>  globalVal=<span class="string">'global'</span>;</span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span>  localVal=<span class="string">'local'</span>;</span><br><span class="line">  <span class="built_in">Function</span>(<span class="string">'console.log(typeof  localVal,  typeof  globalVal);'</span>)();</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="comment">//  result:  undefined,  string</span></span><br></pre></td></tr></table></figure>
<p>this<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>.document=== <span class="built_in">document</span>);<span class="comment">//  true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>=== <span class="built_in">window</span>);<span class="comment">//  true</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">f1</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  <span class="keyword">return</span>  <span class="keyword">this</span>; </span><br><span class="line">&#125; </span><br><span class="line">f1()== <span class="built_in">window</span>;<span class="comment">//true,  global  object</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">f2</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  <span class="string">"use  strict"</span>;<span class="comment">//see  strict  mode </span></span><br><span class="line">  <span class="keyword">return</span>  <span class="keyword">this</span>; </span><br><span class="line">&#125; </span><br><span class="line">f2()== <span class="literal">undefined</span>;<span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span>  o=&#123;<span class="attr">prop</span>:  <span class="number">37</span>&#125;; </span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">independent</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">  <span class="keyword">return</span>  <span class="keyword">this</span>.prop; </span><br><span class="line">&#125; </span><br><span class="line">o.f = independent; </span><br><span class="line"><span class="built_in">console</span>.log(o.f());<span class="comment">//  logs  37</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span>  o=&#123;<span class="attr">f</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="keyword">return</span>  <span class="keyword">this</span>.a+  <span class="keyword">this</span>.b;&#125;&#125;;</span><br><span class="line"><span class="keyword">var</span>  p=  <span class="built_in">Object</span>.create(o);</span><br><span class="line">p.a=  <span class="number">1</span>;</span><br><span class="line">p.b=  <span class="number">4</span>;</span><br><span class="line"><span class="built_in">console</span>.log(p.f());<span class="comment">//  5</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">MyClass</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.a=  <span class="number">37</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span>  o=  <span class="keyword">new</span>  MyClass();   <span class="comment">//this指向空对象，空对象的原型为MyClass.prototype,没有返回值时默认返回this</span></span><br><span class="line"><span class="built_in">console</span>.log(o.a);<span class="comment">//  37</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">C2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.a=  <span class="number">37</span>;</span><br><span class="line">  <span class="keyword">return</span>&#123;<span class="attr">a</span>:  <span class="number">38</span>&#125;;</span><br><span class="line">&#125;</span><br><span class="line">o=  <span class="keyword">new</span>  C2();</span><br><span class="line"><span class="built_in">console</span>.log(o.a);<span class="comment">//  38</span></span><br></pre></td></tr></table></figure></p>
<p>call/apply<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">add</span>(<span class="params">c,  d</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span>  <span class="keyword">this</span>.a+  <span class="keyword">this</span>.b+  c+  d;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span>  o=&#123;<span class="attr">a</span>:<span class="number">1</span>,  b:<span class="number">3</span>&#125;;</span><br><span class="line">add.call(o,  <span class="number">5</span>,  <span class="number">7</span>);<span class="comment">//  1+  3+  5+  7=  16</span></span><br><span class="line">add.apply(o,[<span class="number">10</span>,  <span class="number">20</span>]);<span class="comment">//  1+  3+  10+  20=  34</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">bar</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">this</span>));</span><br><span class="line">&#125;</span><br><span class="line">bar.call(<span class="number">7</span>);<span class="comment">//"[object  Number]"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">f</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span>  <span class="keyword">this</span>.a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span>  g=  f.bind(&#123;<span class="attr">a</span>:<span class="string">"test"</span>&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(g());<span class="comment">//  test</span></span><br><span class="line"><span class="keyword">var</span>  o=&#123;<span class="attr">a</span>:  <span class="number">37</span>,  f:  f,  g:  g&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(o.f(),  o.g());<span class="comment">//  37,  test</span></span><br></pre></td></tr></table></figure></p>
<p>arguments</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">foo</span>(<span class="params">x,  y,  z</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">arguments</span>.length;<span class="comment">//  2</span></span><br><span class="line">    <span class="built_in">arguments</span>[<span class="number">0</span>];<span class="comment">//  1</span></span><br><span class="line">    <span class="built_in">arguments</span>[<span class="number">0</span>]=  <span class="number">10</span>;</span><br><span class="line">    x;<span class="comment">//  change  to  10;</span></span><br><span class="line">    <span class="built_in">arguments</span>[<span class="number">2</span>]=  <span class="number">100</span>;</span><br><span class="line">    z;<span class="comment">//  still  undefined!!!</span></span><br><span class="line">    <span class="built_in">arguments</span>.callee===  foo;<span class="comment">//  true</span></span><br><span class="line">&#125;</span><br><span class="line">foo(<span class="number">1</span>,  <span class="number">2</span>);</span><br><span class="line">foo.length;<span class="comment">//  3</span></span><br><span class="line">foo.name;<span class="comment">//"foo"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">foo</span>(<span class="params">x,  y</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x,  y,  <span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">foo.call(<span class="number">100</span>,  <span class="number">1</span>,  <span class="number">2</span>);<span class="comment">//  1,  2,  Number(100)</span></span><br><span class="line">foo.apply(<span class="literal">true</span>,[<span class="number">3</span>,  <span class="number">4</span>]);<span class="comment">//  3,  4,  Boolean(true)</span></span><br><span class="line">foo.apply(<span class="literal">null</span>);<span class="comment">//  undefined,  undefined,  window</span></span><br><span class="line">foo.apply(<span class="literal">undefined</span>);<span class="comment">//  undefined,  undefined,  window</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.x=  <span class="number">9</span>;  </span><br><span class="line"><span class="keyword">var</span>  <span class="built_in">module</span>=&#123;</span><br><span class="line">  x:  <span class="number">81</span>,</span><br><span class="line">  getX:  <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;  <span class="keyword">return</span>  <span class="keyword">this</span>.x;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">module</span>.getX();<span class="comment">//  81</span></span><br><span class="line"><span class="keyword">var</span>  getX=  <span class="built_in">module</span>.getX;</span><br><span class="line">getX();<span class="comment">//  9</span></span><br><span class="line"><span class="keyword">var</span>  boundGetX=  getX.bind(<span class="built_in">module</span>);</span><br><span class="line">boundGetX();<span class="comment">//  81</span></span><br></pre></td></tr></table></figure>
<p>bind 与 currying<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">add</span>(<span class="params">a,  b,  c</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span>  a+  b+  c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span>  func=  add.bind(<span class="literal">undefined</span>,  <span class="number">100</span>);</span><br><span class="line">func(<span class="number">1</span>,  <span class="number">2</span>);<span class="comment">//  103</span></span><br><span class="line"><span class="keyword">var</span>  func2=  func.bind(<span class="literal">undefined</span>,  <span class="number">200</span>);</span><br><span class="line">func2(<span class="number">10</span>);<span class="comment">//  310</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>  <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.b=  <span class="number">100</span>;</span><br><span class="line">  <span class="keyword">return</span>  <span class="keyword">this</span>.a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span>  func=  foo.bind(&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;);</span><br><span class="line">func();<span class="comment">//  1</span></span><br><span class="line"><span class="keyword">new</span>  func();<span class="comment">//&#123;b:  100&#125; foo没有返回对象，所以默认返回this，bind不起作用？？？</span></span><br></pre></td></tr></table></figure></p>
<p>###第七章 闭包与作用域<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> localV = <span class="number">30</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> localV</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> func = outer()</span><br><span class="line">func() <span class="comment">//30</span></span><br><span class="line"></span><br><span class="line">!<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> localval = <span class="string">'localval'</span></span><br><span class="line">  <span class="built_in">document</span>.addEventListener(<span class="string">'click'</span>,</span><br><span class="line">    <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(localval)</span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.body.innerHTML = <span class="string">"&lt;div id=div1&gt;aaa&lt;/div&gt;"</span>+<span class="string">"&lt;div id=div2&gt;bbb&lt;/div&gt;"</span>+<span class="string">"&lt;div id=div3&gt;ccc&lt;/div&gt;"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">1</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">    !<span class="function"><span class="keyword">function</span>(<span class="params">i</span>)</span>&#123;  <span class="comment">//把函数变为函数表达式，而不是函数声明</span></span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">"div"</span>+i).addEventListenner(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            alert(i);<span class="comment">//1,2,3</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>抽象概念： 执行上下文（Execution Context，缩写为EC）与变量对象variable object(VO)<br>函数中的激活对象  VO===AO<br>AO={<br>  arguments:<arg0><br>}<br>VO 的填充顺序<br>1.函数参数（若未传入，初始化参数则为undefined）<br>2.函数声明（若发生冲突，会覆盖）<br>3.变量声明(初始化变量值为undefined若发生冲突则会忽略）</arg0></p>
<p>变量初始化阶段，代码执行阶段<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">alert(x) <span class="comment">//funtion</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x=<span class="number">10</span></span><br><span class="line">alert(x)  <span class="comment">//10</span></span><br><span class="line">x=<span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">x</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">alert(x) <span class="comment">//20</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> a=<span class="number">1</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">alert(a) <span class="comment">//1</span></span><br><span class="line">alert(b) <span class="comment">//undefine</span></span><br></pre></td></tr></table></figure></p>
<p>###第八章 OOP<br>对象指的是类的实例<br>基于原型的继承<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.y = <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">typeof</span> Foo.prototype <span class="comment">//"object"</span></span><br><span class="line">Foo.prototype.x= <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> obj3 = <span class="keyword">new</span> Foo() <span class="comment">//此时Foo中的this指向obj3，obj3的原型指向Foo.prototype</span></span><br><span class="line"></span><br><span class="line">Foo.prototype</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">constructor</span>:Foo,</span><br><span class="line">  __proto__:Object.prototype  //chrome中暴漏，不是标准属性</span><br><span class="line">  x:1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">obj3.y //2</span><br><span class="line">obj3.x //1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function Person(name, age) &#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.hi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="keyword">this</span>.age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.LEGS_NUM = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name,age,className</span>) </span>&#123;</span><br><span class="line">  Person.call(<span class="keyword">this</span>,name,age)</span><br><span class="line">  <span class="keyword">this</span>.className = className</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Student.prototype  = <span class="built_in">Object</span>.create(Person.prototype) <span class="comment">//创建一个空对象，空对象的原型指向Person.prototype</span></span><br><span class="line">Student.prototype.constructor = Student</span><br><span class="line">Student.prototype.hi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="keyword">this</span>.age + <span class="keyword">this</span>.className)</span><br><span class="line">&#125;</span><br><span class="line">Student.prototype.learn = <span class="function"><span class="keyword">function</span>(<span class="params">subject</span>) </span>&#123; </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name+ <span class="keyword">this</span>.subject)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bosn = <span class="keyword">new</span> Student(<span class="string">'bosn'</span>,<span class="number">22</span>,<span class="string">'class 3'</span>)</span><br><span class="line">bosn =&gt; Student.prototype =&gt;Person.prototype=&gt;<span class="built_in">Object</span>.prototype=&gt;<span class="literal">null</span></span><br></pre></td></tr></table></figure></p>
<p>prototype属性<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Student.prototype.x = <span class="number">101</span></span><br><span class="line">bosn.x <span class="comment">//101</span></span><br><span class="line"></span><br><span class="line">Student.prototype = &#123;<span class="attr">y</span>:<span class="number">2</span>&#125;</span><br><span class="line">bosn.y <span class="comment">//undefined 虽然改变了Student.prototype，但已经生成的实例不会变了，只影响新生成的</span></span><br><span class="line">bosn.x <span class="comment">//101</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> nunnly =  <span class="keyword">new</span> Student(<span class="string">'nunnly'</span>,<span class="number">3</span>, <span class="string">'grade 3'</span>)</span><br><span class="line">nunnly.x <span class="comment">//undefined</span></span><br><span class="line">nunnly.y <span class="comment">//2</span></span><br></pre></td></tr></table></figure></p>
<p>instanceof<br>[1,2] instanceof Array === true<br>instanceof左边一般是一个对象，右边是一个函数或构造器，右边构造器的prototype是否出现在左边的原型链上</p>
<p>实现继承的方式<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Student.prototype = Person.prototype  <span class="comment">//不对</span></span><br><span class="line">Student.prototype = <span class="keyword">new</span> Person()       <span class="comment">//不太对，Person要有参数不知道传啥</span></span><br><span class="line">Student.prototype = <span class="built_in">Object</span>.create(Person.prototype)  <span class="comment">//ES5之后</span></span><br><span class="line"><span class="comment">//ES5之前</span></span><br><span class="line"><span class="keyword">if</span>(!<span class="built_in">Object</span>.create) &#123;</span><br><span class="line">  <span class="built_in">Object</span>.create = <span class="function"><span class="keyword">function</span>(<span class="params">proto</span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    F.prototype = proto</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> F</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>模拟重载<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">arguments</span></span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> args[<span class="number">0</span>] === <span class="string">'object'</span> &amp;&amp; args[<span class="number">0</span>]) &#123;</span><br><span class="line">    <span class="keyword">if</span>(args[<span class="number">0</span>].name) &#123;</span><br><span class="line">      <span class="keyword">this</span>.name = args[<span class="number">0</span>].name</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(args[<span class="number">0</span>].age) &#123;</span><br><span class="line">      <span class="keyword">this</span>.age = args[<span class="number">0</span>].age</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(arg[<span class="number">0</span>]) &#123;</span><br><span class="line">      <span class="keyword">this</span>.name = args[<span class="number">0</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(arg[<span class="number">1</span>]) &#123;</span><br><span class="line">      <span class="keyword">this</span>.age = args[<span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.toString = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">'name='</span> + <span class="keyword">this</span>.name+ <span class="string">'age='</span> + <span class="keyword">this</span>.age</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bosn = <span class="keyword">new</span> Person(<span class="string">'bosn'</span>,<span class="number">27</span>)</span><br><span class="line">bosn.toString()</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> nunn = <span class="keyword">new</span> Person(&#123;<span class="attr">name</span>:<span class="string">'Nunn'</span>,<span class="attr">age</span>:<span class="number">38</span>&#125;)</span><br><span class="line">nunn.toString()</span><br></pre></td></tr></table></figure></p>
<p>链式调用<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ClassManager</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">ClassManager.prototype.addClass = <span class="function"><span class="keyword">function</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Class:'</span> + str +<span class="string">'added'</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> manager = <span class="keyword">new</span> ClassManager()</span><br><span class="line">manager.addClass(<span class="string">'classA'</span>).addClass(<span class="string">'classB'</span>).addClass(<span class="string">'classC'</span>)</span><br></pre></td></tr></table></figure></p>
<p>正则表达式<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[a-z]&#123;<span class="number">4</span>&#125; <span class="comment">//a到z之间的任意字母重复4次</span></span><br><span class="line">\d\d\d <span class="comment">//3个数字</span></span><br><span class="line">/\d\d\d/.test(<span class="string">"123"</span>)  <span class="comment">//true</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"Bosn"</span>).test(<span class="string">"hi,Bosn"</span>) <span class="comment">//true</span></span><br><span class="line"> /.../.test(<span class="string">'1a@'</span>) <span class="comment">//true</span></span><br><span class="line"> \d 数字<span class="number">0</span><span class="number">-9</span></span><br><span class="line"> \D 不是数字<span class="number">0</span><span class="number">-9</span></span><br><span class="line"> \w 数字<span class="number">0</span><span class="number">-9</span> a-z A-Z或下划线</span><br><span class="line"> \W 非\w</span><br><span class="line"> [^a-z] <span class="comment">//a-z以外的</span></span><br><span class="line"> ^hi <span class="comment">//表示在行首</span></span><br><span class="line">test$ <span class="comment">//表示在行尾</span></span><br><span class="line">/\^abc/.test(<span class="string">'^abc'</span>)</span><br><span class="line">/(abc)\<span class="number">1</span>/.test(<span class="string">'abcabc'</span>)</span><br><span class="line">/(?:abc)(def)\<span class="number">1</span>/.test(<span class="string">'abcdefdef'</span>)</span><br><span class="line">abc* 会匹配ab,abc,abcc..</span><br><span class="line">abc*? 非贪婪算法 在abccccc中会匹配ab</span><br><span class="line">x? 出现<span class="number">0</span>次或<span class="number">1</span>次</span><br></pre></td></tr></table></figure></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">John Doe</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2018/11/22/note/">http://yoursite.com/2018/11/22/note/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2018/11/22/30secOfCode/"><i class="fa fa-chevron-left">  </i><span>30secOfCode</span></a></div><div class="next-post pull-right"><a href="/2018/11/22/musicnote/"><span>vue-music Note</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2018 By John Doe</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.3"></script><script src="/js/fancybox.js?version=1.5.3"></script><script src="/js/sidebar.js?version=1.5.3"></script><script src="/js/copy.js?version=1.5.3"></script><script src="/js/fireworks.js?version=1.5.3"></script><script src="/js/transition.js?version=1.5.3"></script><script src="/js/scroll.js?version=1.5.3"></script><script src="/js/head.js?version=1.5.3"></script></body></html>